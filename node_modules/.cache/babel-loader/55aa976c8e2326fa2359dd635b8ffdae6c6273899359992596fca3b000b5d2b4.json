{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,useAuth}from'./contexts/AuthContext';import Navbar from'./components/Navbar';import Welcome from'./components/Welcome';import Login from'./components/Login';import RoleSelection from'./components/RoleSelection';import Dashboard from'./components/Dashboard';import ProjectList from'./components/ProjectList';import PostProject from'./components/PostProject';import Communications from'./components/Communications';import'./index.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProtectedRoute(_ref){let{children}=_ref;const{currentUser,userProfile}=useAuth();if(!currentUser){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}if(!(userProfile!==null&&userProfile!==void 0&&userProfile.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/role-selection\"});}return children;}function AppContent(){const{currentUser,userProfile}=useAuth();const currentPath=window.location.pathname;// Show navbar for authenticated users, on the projects page, or on the welcome page, but not on login page\nconst showNavbar=(currentUser&&(userProfile===null||userProfile===void 0?void 0:userProfile.role)||currentPath==='/projects'||currentPath==='/')&&currentPath!=='/login';return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[showNavbar&&/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:currentUser&&userProfile!==null&&userProfile!==void 0&&userProfile.role?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"}):/*#__PURE__*/_jsx(Welcome,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!currentUser?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\"})}),/*#__PURE__*/_jsx(Route,{path:\"/role-selection\",element:currentUser&&!(userProfile!==null&&userProfile!==void 0&&userProfile.role)?/*#__PURE__*/_jsx(RoleSelection,{}):/*#__PURE__*/_jsx(Navigate,{to:currentUser?\"/dashboard\":\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/projects\",element:/*#__PURE__*/_jsx(ProjectList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/post-project\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(PostProject,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/communications\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Communications,{})})})]})]});}function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AppContent,{})})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","useAuth","Navbar","Welcome","Login","RoleSelection","Dashboard","ProjectList","PostProject","Communications","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","currentUser","userProfile","to","role","AppContent","currentPath","window","location","pathname","showNavbar","className","path","element","App"],"sources":["/Users/jaikanthkamisetti/Documents/Trae/SRM AP/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport Navbar from './components/Navbar';\nimport Welcome from './components/Welcome';\nimport Login from './components/Login';\nimport RoleSelection from './components/RoleSelection';\nimport Dashboard from './components/Dashboard';\nimport ProjectList from './components/ProjectList';\nimport PostProject from './components/PostProject';\nimport Communications from './components/Communications';\nimport './index.css';\n\nfunction ProtectedRoute({ children }) {\n  const { currentUser, userProfile } = useAuth();\n  \n  if (!currentUser) {\n    return <Navigate to=\"/login\" />;\n  }\n  \n  if (!userProfile?.role) {\n    return <Navigate to=\"/role-selection\" />;\n  }\n  \n  return children;\n}\n\nfunction AppContent() {\n  const { currentUser, userProfile } = useAuth();\n  const currentPath = window.location.pathname;\n\n  // Show navbar for authenticated users, on the projects page, or on the welcome page, but not on login page\n  const showNavbar = ((currentUser && userProfile?.role) || currentPath === '/projects' || currentPath === '/') && currentPath !== '/login';\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {showNavbar && <Navbar />}\n      \n      <Routes>\n        <Route \n          path=\"/\" \n          element={\n            currentUser && userProfile?.role ? \n            <Navigate to=\"/dashboard\" /> : \n            <Welcome />\n          } \n        />\n        <Route \n          path=\"/login\" \n          element={!currentUser ? <Login /> : <Navigate to=\"/dashboard\" />} \n        />\n        <Route \n          path=\"/role-selection\" \n          element={\n            currentUser && !userProfile?.role ? \n            <RoleSelection /> : \n            <Navigate to={currentUser ? \"/dashboard\" : \"/login\"} />\n          } \n        />\n        <Route \n          path=\"/dashboard\" \n          element={\n            <ProtectedRoute>\n              <Dashboard />\n            </ProtectedRoute>\n          } \n        />\n        <Route \n          path=\"/projects\" \n          element={<ProjectList />} \n        />\n        <Route \n          path=\"/post-project\" \n          element={\n            <ProtectedRoute>\n              <PostProject />\n            </ProtectedRoute>\n          } \n        />\n        <Route \n          path=\"/communications\" \n          element={\n            <ProtectedRoute>\n              <Communications />\n            </ProtectedRoute>\n          } \n        />\n      </Routes>\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <AppContent />\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}